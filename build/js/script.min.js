class Book{constructor(t,e,i,o){this.id=8999*Math.random()+1e3,this.title=t,this.author=e,this.year=i,this.image=o}}class Page{constructor(t,e,i){this.App=i,this.id=t,this.pathToContent=e,this.domElement=document.getElementById(this.id),this.contentElement=this.pathToContent?this.domElement.querySelector(this.pathToContent):this.domElement}show(...t){this.domElement.classList.add("show"),this.render(...t)}hide(...t){this.domElement.classList.remove("show"),this.render(...t)}render(){this.contentElement.innerHTML=null}}const BOOKS_MOCK=[new Book("JavaScript. Оптимизация производительности","Николас Закас",2012,"https://ozon-st.cdn.ngenix.net/multimedia/1005511392.jpg"),new Book("JavaScript. Шаблоны","Стоян Стефанов",2011,"https://ozon-st.cdn.ngenix.net/multimedia/1002535209.jpg"),new Book("ES6 и не только","Кайл Симпсон",2017,"https://ozon-st.cdn.ngenix.net/multimedia/1015269939.jpg"),new Book("Изучаем JavaScript. Руководство по созданию современных веб-сайтов","Этан Браун",2017,"https://ozon-st.cdn.ngenix.net/multimedia/1019046801.jpg")];class BookList extends Page{constructor(t,e){super(t,".table > tbody",e),this.BOOKS_DATA=this.App.BOOKS_DATA}render(){super.render(),this.BOOKS_DATA.length||(this.contentElement.innerHTML="На данный момент нет добавленных книг."),this.BOOKS_DATA.forEach((t,e)=>{const i=document.createElement("tr");i.innerHTML=`\n                        <tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<img src="${t.image}" width="150px" alt="js">\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<h2>${t.title}</h2>\n\t\t\t\t\t\t\t\t<h3>${t.author}</h3>\n\t\t\t\t\t\t\t\t<span>${t.year} год</span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<button class="btn edit color-edit">Редактировать</button>\n\t\t\t\t\t\t\t\t<br>\n\t\t\t\t\t\t\t\t<button class="btn del color-del">Удалить</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>`,i.querySelector(".edit").addEventListener("click",this.editBook.bind(this,t)),i.querySelector(".del").addEventListener("click",this.removeBook.bind(this,e)),this.contentElement.appendChild(i)})}removeBook(t){this.BOOKS_DATA.splice(t,1),this.render()}editBook(t){this.App.editBook(t)}}class BookEditor extends Page{constructor(t,e){super(t,null,e),this.book=null,this.pageTitleElement=this.domElement.querySelector(".page-title"),this.titleInput=this.domElement.querySelector("#title"),this.authorInput=this.domElement.querySelector("#author"),this.yearInput=this.domElement.querySelector("#year"),this.imageInput=this.domElement.querySelector("#image"),this.domElement.querySelector("#save").addEventListener("click",this.saveBook.bind(this)),this.domElement.querySelector("#cancel").addEventListener("click",()=>{this.App.showPage("booklist")})}render(t=null){this.clear(),this.book=t,this.pageTitleElement.innerHTML=this.book?"Редактирование книги":"Новая книга",this.book&&(this.titleInput.value=this.book.title,this.authorInput.value=this.book.author,this.yearInput.value=this.book.year,this.imageInput.value=this.book.image)}saveBook(){this.book?(this.book.title=this.titleInput.value,this.book.author=this.authorInput.value,this.book.year=this.yearInput.value,this.book.image=this.imageInput.value):this.App.BOOKS_DATA.push(new Book(this.titleInput.value,this.authorInput.value,this.yearInput.value,this.imageInput.value)),this.App.showPage("booklist"),this.clear()}clear(){this.titleInput.value=null,this.authorInput.value=null,this.yearInput.value=null,this.imageInput.value=null}}class App{constructor(){this.BOOKS_DATA=BOOKS_MOCK,this.pages=[new BookList("booklist",this),new BookEditor("editbook",this)],document.getElementById("create").addEventListener("click",()=>{this.editBook()})}init(){this.showPage("booklist")}editBook(t=null){this.showPage("editbook",t)}showPage(t,...e){this.pages.forEach(i=>{t===i.id?i.show(...e):i.hide()})}}window.onload=(()=>{(new App).init()});